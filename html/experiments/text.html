<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>text</title>
    <style media="screen">
      .hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        margin: -1px;
        padding: 0;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: none;
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <!-- prettier-ignore -->
    <p id="p">
      <span style="display: none;">hidden1</span>
      some     text
      <span class="hidden">hidden2</span>
    </p>
    <pre id="pre"></pre>
    <script>
      const range = document.createRange();
      range.selectNodeContents(p);
      pre.textContent = JSON.stringify(
        {
          textContent: p.textContent,
          innerText: p.innerText,
          selectNodeContents: range.toString(),
        },
        undefined,
        2
      );
    </script>
  </body>
</html>
